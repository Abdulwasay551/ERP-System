{% load static %}
<style>
    .sidebar-submenu {
        transition: all 0.3s ease;
        opacity: 0;
        visibility: hidden;
        transform: translateX(-10px);
    }
    
    .group:hover .sidebar-submenu {
        opacity: 1;
        visibility: visible;
        transform: translateX(0);
    }
    
    .sidebar.collapsed .sidebar-submenu {
        left: 4rem !important;
        top: 0;
    }
    
    .sidebar.collapsed .group .sidebar-item .fa-chevron-down {
        display: none;
    }
    
    /* Mobile submenu */
    @media (max-width: 768px) {
        .sidebar-submenu {
            position: relative;
            left: 0 !important;
            top: 0 !important;
            margin-left: 0 !important;
            width: 100% !important;
            background: rgba(255, 255, 255, 0.05) !important;
            border: none !important;
            border-radius: 0.5rem !important;
            margin-top: 0.5rem;
        }
        
        .group:hover .sidebar-submenu {
            display: block;
        }
    }
</style>

<!-- Accounting Module Sidebar -->
<div class="sidebar-content">
    <!-- Logo/Back Section -->
    <div class="sidebar-logo p-4 border-b border-white/20">
        <div class="flex items-center space-x-3 min-h-[3rem]">
            <a href="{% url 'dashboard' %}" class="w-12 h-12 bg-white/20 backdrop-blur-md hover:bg-white/30 rounded-full flex items-center justify-center transition-all flex-shrink-0 border border-white/30">
                <i class="fas fa-arrow-left text-white text-base"></i>
            </a>
            <span class="text-xl font-bold sidebar-text whitespace-nowrap text-white">Accounting</span>
        </div>
    </div>

    <!-- Navigation Items -->
    <nav class="sidebar-nav flex-1 py-4 space-y-2 mt-2">
        <!-- Dashboard -->
        <a href="{% url 'accounting:dashboard' %}" class="sidebar-item {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
            <i class="fas fa-tachometer-alt sidebar-icon"></i>
            <span class="sidebar-text">Dashboard</span>
        </a>

        <!-- Chart of Accounts -->
        <div class="group relative">
            <a href="{% url 'accounting:accounts' %}" class="sidebar-item {% if 'account' in request.resolver_match.url_name %}active{% endif %}">
                <i class="fas fa-list-alt sidebar-icon"></i>
                <span class="sidebar-text">Chart of Accounts</span>
                <i class="fas fa-chevron-down sidebar-text text-xs ml-auto transform transition-transform group-hover:rotate-180"></i>
            </a>
            
            <!-- COA Submenu -->
            <div class="sidebar-submenu hidden group-hover:block absolute left-full top-0 ml-2 w-56 bg-white/10 backdrop-blur-md rounded-lg border border-white/20 z-50 shadow-lg">
                <div class="p-2 space-y-1">
                    <a href="{% url 'accounting:accounts' %}" class="flex items-center px-3 py-2 text-sm text-white/90 hover:bg-white/20 rounded-md transition-colors">
                        <i class="fas fa-list mr-2 w-4 text-center"></i>
                        All Accounts
                    </a>
                    <a href="{% url 'accounting:account_create' %}" class="flex items-center px-3 py-2 text-sm text-white/90 hover:bg-white/20 rounded-md transition-colors">
                        <i class="fas fa-plus mr-2 w-4 text-center"></i>
                        Add Account
                    </a>
                    <a href="{% url 'accounting:chart_of_accounts' %}" class="flex items-center px-3 py-2 text-sm text-white/90 hover:bg-white/20 rounded-md transition-colors">
                        <i class="fas fa-sitemap mr-2 w-4 text-center"></i>
                        Chart View
                    </a>
                    <a href="{% url 'accounting:account_categories' %}" class="flex items-center px-3 py-2 text-sm text-white/90 hover:bg-white/20 rounded-md transition-colors">
                        <i class="fas fa-folder mr-2 w-4 text-center"></i>
                        Categories
                    </a>
                    <a href="{% url 'accounting:account_groups' %}" class="flex items-center px-3 py-2 text-sm text-white/90 hover:bg-white/20 rounded-md transition-colors">
                        <i class="fas fa-layer-group mr-2 w-4 text-center"></i>
                        Groups
                    </a>
                </div>
            </div>
        </div>

        <!-- Journal Entries -->
        <div class="group relative">
            <a href="{% url 'accounting:journal_entries' %}" class="sidebar-item {% if 'journal' in request.resolver_match.url_name %}active{% endif %}">
                <i class="fas fa-book sidebar-icon"></i>
                <span class="sidebar-text">Journal Entries</span>
                <i class="fas fa-chevron-down sidebar-text text-xs ml-auto transform transition-transform group-hover:rotate-180"></i>
            </a>
            
            <!-- Journal Submenu -->
            <div class="sidebar-submenu hidden group-hover:block absolute left-full top-0 ml-2 w-56 bg-white/10 backdrop-blur-md rounded-lg border border-white/20 z-50 shadow-lg">
                <div class="p-2 space-y-1">
                    <a href="{% url 'accounting:journal_entries' %}" class="flex items-center px-3 py-2 text-sm text-white/90 hover:bg-white/20 rounded-md transition-colors">
                        <i class="fas fa-list mr-2 w-4 text-center"></i>
                        All Entries
                    </a>
                    <a href="{% url 'accounting:journal_entry_create' %}" class="flex items-center px-3 py-2 text-sm text-white/90 hover:bg-white/20 rounded-md transition-colors">
                        <i class="fas fa-plus mr-2 w-4 text-center"></i>
                        Create Entry
                    </a>
                    <a href="{% url 'accounting:journal' %}" class="flex items-center px-3 py-2 text-sm text-white/90 hover:bg-white/20 rounded-md transition-colors">
                        <i class="fas fa-book-open mr-2 w-4 text-center"></i>
                        Journal Book
                    </a>
                    <a href="{% url 'accounting:auto_entries' %}" class="flex items-center px-3 py-2 text-sm text-white/90 hover:bg-white/20 rounded-md transition-colors">
                        <i class="fas fa-magic mr-2 w-4 text-center"></i>
                        Auto Entries
                    </a>
                </div>
            </div>
        </div>

        <!-- General Ledger -->
        <a href="{% url 'accounting:general_ledger' %}" class="sidebar-item {% if 'ledger' in request.resolver_match.url_name %}active{% endif %}">
            <i class="fas fa-file-invoice sidebar-icon"></i>
            <span class="sidebar-text">General Ledger</span>
        </a>

        <!-- Financial Reports -->
        <div class="group relative">
            <a href="{% url 'accounting:reports' %}" class="sidebar-item {% if 'report' in request.resolver_match.url_name %}active{% endif %}">
                <i class="fas fa-chart-line sidebar-icon"></i>
                <span class="sidebar-text">Financial Reports</span>
                <i class="fas fa-chevron-down sidebar-text text-xs ml-auto transform transition-transform group-hover:rotate-180"></i>
            </a>
            
            <!-- Reports Submenu -->
            <div class="sidebar-submenu hidden group-hover:block absolute left-full top-0 ml-2 w-56 bg-white/10 backdrop-blur-md rounded-lg border border-white/20 z-50 shadow-lg">
                <div class="p-2 space-y-1">
                    <a href="{% url 'accounting:trial_balance' %}" class="flex items-center px-3 py-2 text-sm text-white/90 hover:bg-white/20 rounded-md transition-colors">
                        <i class="fas fa-balance-scale mr-2 w-4 text-center"></i>
                        Trial Balance
                    </a>
                    <a href="{% url 'accounting:profit_loss' %}" class="flex items-center px-3 py-2 text-sm text-white/90 hover:bg-white/20 rounded-md transition-colors">
                        <i class="fas fa-chart-pie mr-2 w-4 text-center"></i>
                        Profit & Loss
                    </a>
                    <a href="{% url 'accounting:balance_sheet' %}" class="flex items-center px-3 py-2 text-sm text-white/90 hover:bg-white/20 rounded-md transition-colors">
                        <i class="fas fa-calculator mr-2 w-4 text-center"></i>
                        Balance Sheet
                    </a>
                    <a href="{% url 'accounting:cash_flow' %}" class="flex items-center px-3 py-2 text-sm text-white/90 hover:bg-white/20 rounded-md transition-colors">
                        <i class="fas fa-money-bill-wave mr-2 w-4 text-center"></i>
                        Cash Flow
                    </a>
                    <a href="{% url 'accounting:financial_statements' %}" class="flex items-center px-3 py-2 text-sm text-white/90 hover:bg-white/20 rounded-md transition-colors">
                        <i class="fas fa-file-alt mr-2 w-4 text-center"></i>
                        All Statements
                    </a>
                </div>
            </div>
        </div>

        <!-- Bank Reconciliation -->
        <a href="{% url 'accounting:bank_reconciliation' %}" class="sidebar-item {% if 'bank' in request.resolver_match.url_name %}active{% endif %}">
            <i class="fas fa-university sidebar-icon"></i>
            <span class="sidebar-text">Bank Reconciliation</span>
        </a>

        <!-- Analytics -->
        <a href="{% url 'accounting:analytics' %}" class="sidebar-item {% if 'analytics' in request.resolver_match.url_name %}active{% endif %}">
            <i class="fas fa-chart-area sidebar-icon"></i>
            <span class="sidebar-text">Analytics</span>
        </a>

        <!-- Module Integration -->
        <a href="{% url 'accounting:module_mappings' %}" class="sidebar-item {% if 'mapping' in request.resolver_match.url_name %}active{% endif %}">
            <i class="fas fa-link sidebar-icon"></i>
            <span class="sidebar-text">Module Mappings</span>
        </a>

        <!-- Settings -->
        <a href="{% url 'accounting:settings' %}" class="sidebar-item {% if 'settings' in request.resolver_match.url_name %}active{% endif %}">
            <i class="fas fa-cog sidebar-icon"></i>
            <span class="sidebar-text">Settings</span>
        </a>
    </nav>
</div>
