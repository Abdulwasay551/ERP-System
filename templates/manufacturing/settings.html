{% extends 'base.html' %}
{% load static %}

{% block title %}Manufacturing Settings{% endblock %}

{% block extra_css %}
<style>
    .settings-section {
        background: white;
        border-radius: 0.75rem;
        padding: 1.5rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        margin-bottom: 1.5rem;
    }
    
    .settings-card {
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 0.75rem;
        padding: 1.5rem;
        margin-bottom: 1rem;
        transition: all 0.3s ease;
    }
    
    .settings-card:hover {
        border-color: #6366f1;
        box-shadow: 0 4px 12px rgba(99, 102, 241, 0.1);
    }
    
    .toggle-switch {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 34px;
    }
    
    .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }
    
    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: .4s;
        border-radius: 34px;
    }
    
    .slider:before {
        position: absolute;
        content: "";
        height: 26px;
        width: 26px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
    }
    
    input:checked + .slider {
        background-color: #6366f1;
    }
    
    input:checked + .slider:before {
        transform: translateX(26px);
    }
    
    .nav-tabs {
        border-bottom: 1px solid #e5e7eb;
        margin-bottom: 2rem;
    }
    
    .nav-tab {
        padding: 0.75rem 1.5rem;
        background: none;
        border: none;
        color: #6b7280;
        font-weight: 500;
        cursor: pointer;
        border-bottom: 2px solid transparent;
        transition: all 0.3s ease;
    }
    
    .nav-tab.active {
        color: #6366f1;
        border-bottom-color: #6366f1;
    }
    
    .nav-tab:hover {
        color: #6366f1;
    }
    
    .tab-content {
        display: none;
    }
    
    .tab-content.active {
        display: block;
    }
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50">
    <!-- Header -->
    <div class="bg-white border-b border-gray-200">
        <div class="container mx-auto px-6 py-8">
            <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
                <div class="mb-6 lg:mb-0">
                    <h1 class="text-4xl font-bold text-gray-900 mb-2">
                        <i class="fas fa-cog text-indigo-600 mr-3"></i>
                        Manufacturing Settings
                    </h1>
                    <p class="text-gray-600">Configure manufacturing module preferences and parameters</p>
                </div>
                <div class="flex flex-col sm:flex-row gap-4">
                    <button class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                        <i class="fas fa-save mr-2"></i>Save Changes
                    </button>
                    <button class="bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 transition-colors">
                        <i class="fas fa-undo mr-2"></i>Reset to Default
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="container mx-auto px-6 py-8">
        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('general')">
                <i class="fas fa-cogs mr-2"></i>General Settings
            </button>
            <button class="nav-tab" onclick="showTab('production')">
                <i class="fas fa-industry mr-2"></i>Production
            </button>
            <button class="nav-tab" onclick="showTab('quality')">
                <i class="fas fa-award mr-2"></i>Quality Control
            </button>
            <button class="nav-tab" onclick="showTab('notifications')">
                <i class="fas fa-bell mr-2"></i>Notifications
            </button>
            <button class="nav-tab" onclick="showTab('integration')">
                <i class="fas fa-plug mr-2"></i>Integration
            </button>
        </div>

        <!-- General Settings Tab -->
        <div id="general-tab" class="tab-content active">
            <div class="settings-section">
                <h3 class="text-xl font-semibold text-gray-900 mb-6">General Configuration</h3>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="settings-card">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h4 class="font-medium text-gray-900">Auto-generate Work Order Numbers</h4>
                                <p class="text-sm text-gray-600">Automatically create sequential work order numbers</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Prefix</label>
                                <input type="text" value="WO-" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Next Number</label>
                                <input type="number" value="1001" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            </div>
                        </div>
                    </div>

                    <div class="settings-card">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h4 class="font-medium text-gray-900">Default Work Center</h4>
                                <p class="text-sm text-gray-600">Set default work center for new operations</p>
                            </div>
                        </div>
                        <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            <option value="">Select Default Work Center</option>
                            {% for center in work_centers %}
                            <option value="{{ center.id }}">{{ center.name }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="settings-card">
                        <h4 class="font-medium text-gray-900 mb-4">Working Hours</h4>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Start Time</label>
                                <input type="time" value="08:00" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">End Time</label>
                                <input type="time" value="17:00" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            </div>
                        </div>
                        <div class="mt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Working Days</label>
                            <div class="flex flex-wrap gap-2">
                                <label class="inline-flex items-center">
                                    <input type="checkbox" checked class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                    <span class="ml-2 text-sm">Monday</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" checked class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                    <span class="ml-2 text-sm">Tuesday</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" checked class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                    <span class="ml-2 text-sm">Wednesday</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" checked class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                    <span class="ml-2 text-sm">Thursday</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" checked class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                    <span class="ml-2 text-sm">Friday</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                    <span class="ml-2 text-sm">Saturday</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                    <span class="ml-2 text-sm">Sunday</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="settings-card">
                        <h4 class="font-medium text-gray-900 mb-4">Currency & Units</h4>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Currency</label>
                                <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                    <option value="USD" selected>USD ($)</option>
                                    <option value="EUR">EUR (€)</option>
                                    <option value="GBP">GBP (£)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Weight Unit</label>
                                <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                    <option value="kg" selected>Kilograms (kg)</option>
                                    <option value="lb">Pounds (lb)</option>
                                    <option value="g">Grams (g)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Production Settings Tab -->
        <div id="production-tab" class="tab-content">
            <div class="settings-section">
                <h3 class="text-xl font-semibold text-gray-900 mb-6">Production Configuration</h3>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="settings-card">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h4 class="font-medium text-gray-900">Automatic Material Consumption</h4>
                                <p class="text-sm text-gray-600">Auto-consume materials when production starts</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>

                    <div class="settings-card">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h4 class="font-medium text-gray-900">Real-time Inventory Updates</h4>
                                <p class="text-sm text-gray-600">Update inventory levels in real-time during production</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>

                    <div class="settings-card">
                        <h4 class="font-medium text-gray-900 mb-4">Lead Time Calculation</h4>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Default Lead Time (days)</label>
                                <input type="number" value="7" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Safety Buffer (%)</label>
                                <input type="number" value="10" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            </div>
                        </div>
                    </div>

                    <div class="settings-card">
                        <h4 class="font-medium text-gray-900 mb-4">Production Planning</h4>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Planning Horizon (weeks)</label>
                                <input type="number" value="4" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            </div>
                            <div>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" checked class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                    <span class="ml-2 text-sm">Enable capacity planning</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quality Control Settings Tab -->
        <div id="quality-tab" class="tab-content">
            <div class="settings-section">
                <h3 class="text-xl font-semibold text-gray-900 mb-6">Quality Control Configuration</h3>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="settings-card">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h4 class="font-medium text-gray-900">Mandatory Quality Checks</h4>
                                <p class="text-sm text-gray-600">Require quality checks before production completion</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>

                    <div class="settings-card">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h4 class="font-medium text-gray-900">Auto-hold on Quality Failure</h4>
                                <p class="text-sm text-gray-600">Automatically hold production on quality failures</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>

                    <div class="settings-card">
                        <h4 class="font-medium text-gray-900 mb-4">Quality Tolerances</h4>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Acceptable Defect Rate (%)</label>
                                <input type="number" value="2" step="0.1" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Sampling Rate (%)</label>
                                <input type="number" value="10" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            </div>
                        </div>
                    </div>

                    <div class="settings-card">
                        <h4 class="font-medium text-gray-900 mb-4">Quality Control Points</h4>
                        <div class="space-y-2">
                            <label class="inline-flex items-center">
                                <input type="checkbox" checked class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                <span class="ml-2 text-sm">Incoming material inspection</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" checked class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                <span class="ml-2 text-sm">In-process quality checks</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" checked class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                <span class="ml-2 text-sm">Final product inspection</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                <span class="ml-2 text-sm">Random quality audits</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notifications Settings Tab -->
        <div id="notifications-tab" class="tab-content">
            <div class="settings-section">
                <h3 class="text-xl font-semibold text-gray-900 mb-6">Notification Preferences</h3>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="settings-card">
                        <h4 class="font-medium text-gray-900 mb-4">Production Alerts</h4>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Work order completion</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Production delays</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Equipment maintenance due</span>
                                <label class="toggle-switch">
                                    <input type="checkbox">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="settings-card">
                        <h4 class="font-medium text-gray-900 mb-4">Quality Alerts</h4>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Quality check failures</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Defect rate threshold exceeded</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Quality audit reminders</span>
                                <label class="toggle-switch">
                                    <input type="checkbox">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="settings-card">
                        <h4 class="font-medium text-gray-900 mb-4">Notification Methods</h4>
                        <div class="space-y-3">
                            <label class="inline-flex items-center">
                                <input type="checkbox" checked class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                <span class="ml-2 text-sm">Email notifications</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" checked class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                <span class="ml-2 text-sm">In-app notifications</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                <span class="ml-2 text-sm">SMS notifications</span>
                            </label>
                        </div>
                    </div>

                    <div class="settings-card">
                        <h4 class="font-medium text-gray-900 mb-4">Email Settings</h4>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Notification Email</label>
                                <input type="email" value="manufacturing@company.com" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Frequency</label>
                                <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                    <option value="immediate" selected>Immediate</option>
                                    <option value="hourly">Hourly digest</option>
                                    <option value="daily">Daily digest</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Integration Settings Tab -->
        <div id="integration-tab" class="tab-content">
            <div class="settings-section">
                <h3 class="text-xl font-semibold text-gray-900 mb-6">System Integration</h3>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="settings-card">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h4 class="font-medium text-gray-900">Inventory Integration</h4>
                                <p class="text-sm text-gray-600">Sync with inventory management system</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Sync Frequency</label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                <option value="realtime" selected>Real-time</option>
                                <option value="15min">Every 15 minutes</option>
                                <option value="hourly">Hourly</option>
                                <option value="daily">Daily</option>
                            </select>
                        </div>
                    </div>

                    <div class="settings-card">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h4 class="font-medium text-gray-900">Sales Integration</h4>
                                <p class="text-sm text-gray-600">Connect with sales order management</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div>
                            <label class="inline-flex items-center">
                                <input type="checkbox" checked class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                <span class="ml-2 text-sm">Auto-create work orders from sales orders</span>
                            </label>
                        </div>
                    </div>

                    <div class="settings-card">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h4 class="font-medium text-gray-900">Accounting Integration</h4>
                                <p class="text-sm text-gray-600">Sync costs and financials</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div>
                            <label class="inline-flex items-center">
                                <input type="checkbox" checked class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                <span class="ml-2 text-sm">Auto-generate cost entries</span>
                            </label>
                        </div>
                    </div>

                    <div class="settings-card">
                        <h4 class="font-medium text-gray-900 mb-4">API Configuration</h4>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">API Rate Limit (requests/min)</label>
                                <input type="number" value="100" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            </div>
                            <div>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" checked class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                    <span class="ml-2 text-sm">Enable API logging</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function showTab(tabName) {
    // Hide all tab contents
    const tabs = document.querySelectorAll('.tab-content');
    tabs.forEach(tab => tab.classList.remove('active'));
    
    // Remove active class from all nav tabs
    const navTabs = document.querySelectorAll('.nav-tab');
    navTabs.forEach(tab => tab.classList.remove('active'));
    
    // Show selected tab content
    document.getElementById(tabName + '-tab').classList.add('active');
    
    // Add active class to clicked nav tab
    event.target.classList.add('active');
}

document.addEventListener('DOMContentLoaded', function() {
    console.log('Manufacturing Settings UI loaded');
    
    // Save settings functionality
    const saveButton = document.querySelector('button:contains("Save Changes")');
    if (saveButton) {
        saveButton.addEventListener('click', function() {
            console.log('Saving manufacturing settings...');
            // Add save logic here
        });
    }
});
</script>
{% endblock %}
