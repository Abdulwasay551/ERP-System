{% extends 'base.html' %}

{% block extra_css %}
<script>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    primary: '#10B981',
                    secondary: '#059669',
                    accent: '#065F46'
                }
            }
        }
    }
</script>
{% endblock %}

{% block content %}
        <!-- Header -->
        <header class="bg-white shadow-sm border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center py-4">
                    <div class="flex items-center">
                        <h1 class="text-2xl font-bold text-gray-900">Analytics Dashboard</h1>
                        <span class="ml-2 px-2 py-1 bg-primary text-white text-xs rounded-full">Analytics Module</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <select class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                            <option>Last 30 Days</option>
                            <option>Last 3 Months</option>
                            <option>Last 6 Months</option>
                            <option>Last Year</option>
                        </select>
                        <button class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition-colors">
                            <i class="fas fa-sync-alt mr-2"></i>Refresh Data
                        </button>
                        <button class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors">
                            <i class="fas fa-download mr-2"></i>Export Dashboard
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Key Performance Indicators -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center">
                        <div class="p-3 bg-green-100 rounded-lg">
                            <i class="fas fa-dollar-sign text-green-600 text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-2xl font-bold text-gray-900">$2.4M</p>
                            <p class="text-sm text-gray-600">Total Revenue</p>
                            <p class="text-xs text-green-600 font-medium">+12.5% from last month</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center">
                        <div class="p-3 bg-blue-100 rounded-lg">
                            <i class="fas fa-chart-line text-blue-600 text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-2xl font-bold text-gray-900">1,847</p>
                            <p class="text-sm text-gray-600">Total Orders</p>
                            <p class="text-xs text-blue-600 font-medium">+8.2% from last month</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center">
                        <div class="p-3 bg-purple-100 rounded-lg">
                            <i class="fas fa-users text-purple-600 text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-2xl font-bold text-gray-900">3,426</p>
                            <p class="text-sm text-gray-600">Active Customers</p>
                            <p class="text-xs text-purple-600 font-medium">+15.7% from last month</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center">
                        <div class="p-3 bg-yellow-100 rounded-lg">
                            <i class="fas fa-percentage text-yellow-600 text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-2xl font-bold text-gray-900">23.8%</p>
                            <p class="text-sm text-gray-600">Profit Margin</p>
                            <p class="text-xs text-yellow-600 font-medium">+2.1% from last month</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Dashboard Content -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <!-- Revenue Trend Chart -->
                <div class="lg:col-span-2 bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Revenue Trend</h3>
                        <div class="flex space-x-2">
                            <button class="text-sm text-primary border border-primary px-3 py-1 rounded">Revenue</button>
                            <button class="text-sm text-gray-500 border border-gray-300 px-3 py-1 rounded hover:border-primary hover:text-primary">Profit</button>
                            <button class="text-sm text-gray-500 border border-gray-300 px-3 py-1 rounded hover:border-primary hover:text-primary">Expenses</button>
                        </div>
                    </div>
                    <div class="h-80 bg-gray-100 rounded-lg flex items-center justify-center">
                        <div class="text-center">
                            <i class="fas fa-chart-area text-gray-400 text-5xl mb-4"></i>
                            <p class="text-gray-500 text-lg">Revenue Trend Chart</p>
                            <p class="text-gray-400 text-sm">Interactive line chart showing revenue growth over time</p>
                        </div>
                    </div>
                </div>

                <!-- Top Products -->
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Top Performing Products</h3>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center p-3 bg-green-50 rounded-lg">
                            <div>
                                <h4 class="font-medium text-gray-900">Widget Pro Max</h4>
                                <p class="text-sm text-gray-600">342 units sold</p>
                            </div>
                            <div class="text-right">
                                <p class="font-medium text-green-600">$68,400</p>
                                <p class="text-xs text-green-600">+18.5%</p>
                            </div>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-blue-50 rounded-lg">
                            <div>
                                <h4 class="font-medium text-gray-900">Standard Widget</h4>
                                <p class="text-sm text-gray-600">567 units sold</p>
                            </div>
                            <div class="text-right">
                                <p class="font-medium text-blue-600">$45,360</p>
                                <p class="text-xs text-blue-600">+12.3%</p>
                            </div>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-yellow-50 rounded-lg">
                            <div>
                                <h4 class="font-medium text-gray-900">Mini Widget</h4>
                                <p class="text-sm text-gray-600">891 units sold</p>
                            </div>
                            <div class="text-right">
                                <p class="font-medium text-yellow-600">$35,640</p>
                                <p class="text-xs text-yellow-600">+8.7%</p>
                            </div>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-purple-50 rounded-lg">
                            <div>
                                <h4 class="font-medium text-gray-900">Widget Accessories</h4>
                                <p class="text-sm text-gray-600">234 units sold</p>
                            </div>
                            <div class="text-right">
                                <p class="font-medium text-purple-600">$14,040</p>
                                <p class="text-xs text-purple-600">+25.1%</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Secondary Analytics -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- Sales by Region -->
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Sales by Region</h3>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">North America</span>
                            <div class="flex items-center">
                                <div class="w-32 bg-gray-200 rounded-full h-3 mr-3">
                                    <div class="bg-blue-600 h-3 rounded-full" style="width: 45%"></div>
                                </div>
                                <span class="text-sm font-medium">$1,080,000</span>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Europe</span>
                            <div class="flex items-center">
                                <div class="w-32 bg-gray-200 rounded-full h-3 mr-3">
                                    <div class="bg-green-600 h-3 rounded-full" style="width: 30%"></div>
                                </div>
                                <span class="text-sm font-medium">$720,000</span>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Asia Pacific</span>
                            <div class="flex items-center">
                                <div class="w-32 bg-gray-200 rounded-full h-3 mr-3">
                                    <div class="bg-yellow-600 h-3 rounded-full" style="width: 20%"></div>
                                </div>
                                <span class="text-sm font-medium">$480,000</span>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Others</span>
                            <div class="flex items-center">
                                <div class="w-32 bg-gray-200 rounded-full h-3 mr-3">
                                    <div class="bg-purple-600 h-3 rounded-full" style="width: 5%"></div>
                                </div>
                                <span class="text-sm font-medium">$120,000</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Customer Acquisition -->
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Customer Acquisition Channels</h3>
                    <div class="h-64 bg-gray-100 rounded-lg flex items-center justify-center">
                        <div class="text-center">
                            <i class="fas fa-chart-pie text-gray-400 text-4xl mb-2"></i>
                            <p class="text-gray-500">Pie chart placeholder</p>
                            <p class="text-gray-400 text-sm">Customer acquisition by channel</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Department Performance -->
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Sales</h3>
                        <i class="fas fa-chart-line text-blue-600 text-xl"></i>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Revenue</span>
                            <span class="text-sm font-medium">$2.4M</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Growth</span>
                            <span class="text-sm font-medium text-green-600">+12.5%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Conversion</span>
                            <span class="text-sm font-medium">3.2%</span>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Inventory</h3>
                        <i class="fas fa-boxes text-green-600 text-xl"></i>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Stock Value</span>
                            <span class="text-sm font-medium">$485K</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Turnover</span>
                            <span class="text-sm font-medium text-blue-600">6.2x</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Low Stock</span>
                            <span class="text-sm font-medium text-yellow-600">12 items</span>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Production</h3>
                        <i class="fas fa-cogs text-yellow-600 text-xl"></i>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Efficiency</span>
                            <span class="text-sm font-medium">87%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Quality</span>
                            <span class="text-sm font-medium text-green-600">98.5%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Downtime</span>
                            <span class="text-sm font-medium text-red-600">2.1%</span>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">HR</h3>
                        <i class="fas fa-users text-purple-600 text-xl"></i>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Employees</span>
                            <span class="text-sm font-medium">145</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Satisfaction</span>
                            <span class="text-sm font-medium text-green-600">92%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Turnover</span>
                            <span class="text-sm font-medium text-yellow-600">5.2%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity and Alerts -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Recent Activity -->
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Recent Business Activity</h3>
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <div class="w-2 h-2 bg-green-500 rounded-full mt-2 mr-3"></div>
                            <div>
                                <p class="text-sm text-gray-900">Large order received from <span class="font-medium">MegaCorp Industries</span></p>
                                <p class="text-xs text-gray-500">$125,000 • 2 hours ago</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3"></div>
                            <div>
                                <p class="text-sm text-gray-900">Production milestone reached: <span class="font-medium">10,000 units</span></p>
                                <p class="text-xs text-gray-500">Manufacturing • 4 hours ago</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="w-2 h-2 bg-yellow-500 rounded-full mt-2 mr-3"></div>
                            <div>
                                <p class="text-sm text-gray-900">New customer registration spike: <span class="font-medium">+15% today</span></p>
                                <p class="text-xs text-gray-500">Marketing • 6 hours ago</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="w-2 h-2 bg-purple-500 rounded-full mt-2 mr-3"></div>
                            <div>
                                <p class="text-sm text-gray-900">Monthly financial report generated</p>
                                <p class="text-xs text-gray-500">Accounting • 8 hours ago</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="w-2 h-2 bg-red-500 rounded-full mt-2 mr-3"></div>
                            <div>
                                <p class="text-sm text-gray-900">Inventory low stock alert: <span class="font-medium">Widget Pro Components</span></p>
                                <p class="text-xs text-gray-500">Inventory • 10 hours ago</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Alerts and Notifications -->
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">System Alerts</h3>
                    <div class="space-y-3">
                        <div class="p-3 border-l-4 border-red-500 bg-red-50 rounded-r-lg">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-medium text-red-900">Critical Stock Level</h4>
                                    <p class="text-sm text-red-700">Widget Pro Max components below minimum threshold</p>
                                </div>
                                <button class="text-red-600 hover:text-red-900">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="p-3 border-l-4 border-yellow-500 bg-yellow-50 rounded-r-lg">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-medium text-yellow-900">Payment Overdue</h4>
                                    <p class="text-sm text-yellow-700">3 customer payments are past due date</p>
                                </div>
                                <button class="text-yellow-600 hover:text-yellow-900">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="p-3 border-l-4 border-blue-500 bg-blue-50 rounded-r-lg">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-medium text-blue-900">Production Target</h4>
                                    <p class="text-sm text-blue-700">Monthly production target 95% achieved</p>
                                </div>
                                <button class="text-blue-600 hover:text-blue-900">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="p-3 border-l-4 border-green-500 bg-green-50 rounded-r-lg">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-medium text-green-900">Quality Milestone</h4>
                                    <p class="text-sm text-green-700">Zero defects achieved for 30 consecutive days</p>
                                </div>
                                <button class="text-green-600 hover:text-green-900">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Integration Notice -->
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mt-8">
                <div class="flex items-start">
                    <i class="fas fa-info-circle text-blue-600 text-lg mr-3 mt-1"></i>
                    <div>
                        <h4 class="text-blue-900 font-medium mb-2">Comprehensive Analytics Integration</h4>
                        <p class="text-blue-800 text-sm">
                            The Analytics Dashboard aggregates real-time data from all ERP modules including Sales, Inventory, Manufacturing, HR, Accounting, and Project Management. 
                            All metrics are automatically updated as transactions occur across the system, providing instant business intelligence and actionable insights.
                        </p>
                    </div>
                </div>
            </div>
        </div>
{% endblock %}

{% block extra_js %}
    <script>
        // Auto-refresh dashboard data every 5 minutes
        function refreshDashboard() {
            // In a real application, this would fetch fresh data from the server
            console.log('Refreshing dashboard data...');
            
            // Add visual feedback
            const refreshBtn = document.querySelector('[data-refresh]');
            if (refreshBtn) {
                const icon = refreshBtn.querySelector('i');
                icon.classList.add('fa-spin');
                setTimeout(() => {
                    icon.classList.remove('fa-spin');
                }, 1000);
            }
        }

        // Dismiss alert functionality
        function setupAlertDismissal() {
            const alertCloseButtons = document.querySelectorAll('.bg-red-50 button, .bg-yellow-50 button, .bg-blue-50 button, .bg-green-50 button');
            alertCloseButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const alert = this.closest('.border-l-4');
                    alert.style.opacity = '0';
                    alert.style.transform = 'translateX(100%)';
                    setTimeout(() => {
                        alert.remove();
                    }, 300);
                });
            });
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            setupAlertDismissal();
            
            // Set up auto-refresh
            setInterval(refreshDashboard, 300000); // 5 minutes
            
            // Add refresh button listener
            const refreshBtn = document.querySelector('button[class*="bg-primary"]');
            if (refreshBtn && refreshBtn.textContent.includes('Refresh')) {
                refreshBtn.setAttribute('data-refresh', 'true');
                refreshBtn.addEventListener('click', refreshDashboard);
            }
        });
    </script>
{% endblock %}
